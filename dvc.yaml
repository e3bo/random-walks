stages:
  hopkins-2020-10-12:
    cmd: fdt=2020-10-12 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-10-12
  hopkins-2021-01-11:
    cmd: fdt=2021-01-11 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2021-01-11
  score-2021-01-11:
    cmd: ddt=2021-01-11 ./quantile-score.R
    deps:
    - covidhub-common.R
    - forecasts
    - hopkins/2021-01-11
    - quantile-score.R
    outs:
    - metrics/2021-01-11-residuals.rds
    plots:
    - metrics/2021-01-11-score-by-loc-type-targ-type-forecast-date.csv:
        cache: false
        template: lqs-loctype-targtype-panels
        x: forecast_date
    - metrics/2021-01-11-score-by-loc-type-targ-type.csv:
        cache: false
        template: lqs-loctype-panel
        x: target_type
    - metrics/2021-01-11-score-by-loc-type.csv:
        cache: false
        template: lqs
        x: loc_type
        x_label: Location type
  data-prep-2020-10-12-36:
    cmd: fdt=2020-10-12 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-10-12
    - infection-kalman-data-prep.R
    outs:
    - data--2020-10-12--36.csv
    - initial-pars--2020-10-12--36.csv
  data-fit-2020-10-12-36:
    cmd: julia InfectionKalmanMain.jl 2020-10-12 36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-10-12--36.csv
    - initial-pars--2020-10-12--36.csv
    outs:
    - minimizer--2020-10-12--36.csv
  write-forecast-2020-10-12-36:
    cmd: fdt=2020-10-12 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-10-12--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-10-12--36.csv
    outs:
    - forecasts/2020-10-12-CEID-InfectionKalman.csv
  hopkins-2020-10-05:
    cmd: fdt=2020-10-05 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-10-05
  data-prep-2020-10-05-36:
    cmd: fdt=2020-10-05 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-10-05
    - infection-kalman-data-prep.R
    outs:
    - data--2020-10-05--36.csv
    - initial-pars--2020-10-05--36.csv
  data-fit-2020-10-05-36:
    cmd: julia InfectionKalmanMain.jl 2020-10-05 36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-10-05--36.csv
    - initial-pars--2020-10-05--36.csv
    outs:
    - minimizer--2020-10-05--36.csv
  write-forecast-2020-10-05-36:
    cmd: fdt=2020-10-05 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-10-05--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-10-05--36.csv
    outs:
    - forecasts/2020-10-05-CEID-InfectionKalman.csv
  hopkins-2020-09-28:
    cmd: fdt=2020-09-28 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-09-28
  data-prep-2020-09-28-36:
    cmd: fdt=2020-09-28 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-09-28
    - infection-kalman-data-prep.R
    outs:
    - data--2020-09-28--36.csv
    - initial-pars--2020-09-28--36.csv
  data-fit-2020-09-28-36:
    cmd: julia InfectionKalmanMain.jl 2020-09-28 36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-09-28--36.csv
    - initial-pars--2020-09-28--36.csv
    outs:
    - minimizer--2020-09-28--36.csv
  write-forecast-2020-09-28-36:
    cmd: fdt=2020-09-28 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-09-28--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-09-28--36.csv
    outs:
    - forecasts/2020-09-28-CEID-InfectionKalman.csv
  hopkins-2020-09-21:
    cmd: fdt=2020-09-21 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-09-21
  data-prep-2020-09-21-36:
    cmd: fdt=2020-09-21 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-09-21
    - infection-kalman-data-prep.R
    outs:
    - data--2020-09-21--36.csv
    - initial-pars--2020-09-21--36.csv
  data-fit-2020-09-21-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-09-21
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-09-21--36.csv
    - initial-pars--2020-09-21--36.csv
    outs:
    - minimizer--2020-09-21--36.csv
  write-forecast-2020-09-21-36:
    cmd: fdt=2020-09-21 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-09-21--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-09-21--36.csv
    outs:
    - forecasts/2020-09-21-CEID-InfectionKalman.csv
  hopkins-2020-09-14:
    cmd: fdt=2020-09-14 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-09-14
  data-prep-2020-09-14-36:
    cmd: fdt=2020-09-14 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-09-14
    - infection-kalman-data-prep.R
    outs:
    - data--2020-09-14--36.csv
    - initial-pars--2020-09-14--36.csv
  data-fit-2020-09-14-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-09-14
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-09-14--36.csv
    - initial-pars--2020-09-14--36.csv
    outs:
    - minimizer--2020-09-14--36.csv
  write-forecast-2020-09-14-36:
    cmd: fdt=2020-09-14 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-09-14--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-09-14--36.csv
    outs:
    - forecasts/2020-09-14-CEID-InfectionKalman.csv
  hopkins-2020-10-19:
    cmd: fdt=2020-10-19 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-10-19
  data-prep-2020-10-19-36:
    cmd: fdt=2020-10-19 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-10-19
    - infection-kalman-data-prep.R
    outs:
    - data--2020-10-19--36.csv
    - initial-pars--2020-10-19--36.csv
  data-fit-2020-10-19-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-10-19
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-10-19--36.csv
    - initial-pars--2020-10-19--36.csv
    outs:
    - minimizer--2020-10-19--36.csv
  write-forecast-2020-10-19-36:
    cmd: fdt=2020-10-19 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-10-19--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-10-19--36.csv
    outs:
    - forecasts/2020-10-19-CEID-InfectionKalman.csv
  hopkins-2020-10-26:
    cmd: fdt=2020-10-26 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-10-26
  data-prep-2020-10-26-36:
    cmd: fdt=2020-10-26 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-10-26
    - infection-kalman-data-prep.R
    outs:
    - data--2020-10-26--36.csv
    - initial-pars--2020-10-26--36.csv
  data-fit-2020-10-26-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-10-26
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-10-26--36.csv
    - initial-pars--2020-10-26--36.csv
    outs:
    - minimizer--2020-10-26--36.csv
  write-forecast-2020-10-26-36:
    cmd: fdt=2020-10-26 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-10-26--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-10-26--36.csv
    outs:
    - forecasts/2020-10-26-CEID-InfectionKalman.csv
  hopkins-2020-11-02:
    cmd: fdt=2020-11-02 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-11-02
  data-prep-2020-11-02-36:
    cmd: fdt=2020-11-02 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-11-02
    - infection-kalman-data-prep.R
    outs:
    - data--2020-11-02--36.csv
    - initial-pars--2020-11-02--36.csv
  data-fit-2020-11-02-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-11-02
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-11-02--36.csv
    - initial-pars--2020-11-02--36.csv
    outs:
    - minimizer--2020-11-02--36.csv
  write-forecast-2020-11-02-36:
    cmd: fdt=2020-11-02 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-11-02--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-11-02--36.csv
    outs:
    - forecasts/2020-11-02-CEID-InfectionKalman.csv
  hopkins-2020-11-09:
    cmd: fdt=2020-11-09 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-11-09
  data-prep-2020-11-09-36:
    cmd: fdt=2020-11-09 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-11-09
    - infection-kalman-data-prep.R
    outs:
    - data--2020-11-09--36.csv
    - initial-pars--2020-11-09--36.csv
  data-fit-2020-11-09-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-11-09
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-11-09--36.csv
    - initial-pars--2020-11-09--36.csv
    outs:
    - minimizer--2020-11-09--36.csv
  write-forecast-2020-11-09-36:
    cmd: fdt=2020-11-09 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-11-09--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-11-09--36.csv
    outs:
    - forecasts/2020-11-09-CEID-InfectionKalman.csv
  hopkins-2020-11-16:
    cmd: fdt=2020-11-16 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-11-16
  data-prep-2020-11-16-36:
    cmd: fdt=2020-11-16 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-11-16
    - infection-kalman-data-prep.R
    outs:
    - data--2020-11-16--36.csv
    - initial-pars--2020-11-16--36.csv
  data-fit-2020-11-16-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-11-16
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-11-16--36.csv
    - initial-pars--2020-11-16--36.csv
    outs:
    - minimizer--2020-11-16--36.csv
  write-forecast-2020-11-16-36:
    cmd: fdt=2020-11-16 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-11-16--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-11-16--36.csv
    outs:
    - forecasts/2020-11-16-CEID-InfectionKalman.csv
  hopkins-2020-11-23:
    cmd: fdt=2020-11-23 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-11-23
  data-prep-2020-11-23-36:
    cmd: fdt=2020-11-23 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-11-23
    - infection-kalman-data-prep.R
    outs:
    - data--2020-11-23--36.csv
    - initial-pars--2020-11-23--36.csv
  data-fit-2020-11-23-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-11-23
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-11-23--36.csv
    - initial-pars--2020-11-23--36.csv
    outs:
    - minimizer--2020-11-23--36.csv
  write-forecast-2020-11-23-36:
    cmd: fdt=2020-11-23 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-11-23--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-11-23--36.csv
    outs:
    - forecasts/2020-11-23-CEID-InfectionKalman.csv
  hopkins-2020-11-30:
    cmd: fdt=2020-11-30 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-11-30
  data-prep-2020-11-30-36:
    cmd: fdt=2020-11-30 loc=36 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-11-30
    - infection-kalman-data-prep.R
    outs:
    - data--2020-11-30--36.csv
    - initial-pars--2020-11-30--36.csv
  data-fit-2020-11-30-36:
    cmd: JULIA_DEPOT_PATH=/home/rstudio/.julia julia InfectionKalmanMain.jl 2020-11-30
      36
    deps:
    - InfectionKalman.jl
    - InfectionKalmanMain.jl
    - data--2020-11-30--36.csv
    - initial-pars--2020-11-30--36.csv
    outs:
    - minimizer--2020-11-30--36.csv
  write-forecast-2020-11-30-36:
    cmd: fdt=2020-11-30 loc=36 Rscript infection-kalman-process-results.R
    deps:
    - data--2020-11-30--36.csv
    - infection-kalman-process-results.R
    - minimizer--2020-11-30--36.csv
    outs:
    - forecasts/2020-11-30-CEID-InfectionKalman.csv
