stages:
  hopkins-2020-08-03:
    cmd: fdt=2020-08-03 Rscript pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-08-03
  forecast-2020-08-03:
    cmd: fdt=2020-08-03 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-08-03
    - model.ini
    outs:
    - forecasts/2020-08-03-CEID-Walk.csv
    metrics:
    - metrics/2020-08-03-forecast-calc-time.json:
        cache: false
  hopkins-2020-07-26:
    cmd: fdt=2020-07-26 Rscript pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-07-26
  forecast-2020-07-26:
    cmd: fdt=2020-07-26 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-07-26
    - model.ini
    outs:
    - forecasts/2020-07-26-CEID-Walk.csv
    metrics:
    - metrics/2020-07-26-forecast-calc-time.json:
        cache: false
  score-2020-08-03:
    cmd: ddt=2020-08-03 Rscript quantile-score.R
    deps:
    - covidhub-common.R
    - forecasts
    - hopkins/2020-08-03
    - quantile-score.R
    outs:
    - metrics/2020-08-03-residuals.rds
    plots:
    - metrics/2020-08-03-score-by-loc-type-targ-type-forecast-date.csv:
        cache: false
    - metrics/2020-08-03-score-by-loc-type-targ-type.csv:
        cache: false
    - metrics/2020-08-03-score-by-loc-type.csv:
        cache: false
