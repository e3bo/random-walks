stages:
  hopkins-2020-10-12:
    cmd: fdt=2020-10-12 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-10-12
  hopkins-2021-01-11:
    cmd: fdt=2021-01-11 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2021-01-11
  score-2021-01-11:
    cmd: ddt=2021-01-11 ./quantile-score.R
    deps:
    - covidhub-common.R
    - forecasts
    - hopkins/2021-01-11
    - quantile-score.R
    outs:
    - metrics/2021-01-11-residuals.rds
    plots:
    - metrics/2021-01-11-score-by-loc-type-targ-type-forecast-date.csv:
        cache: false
        template: lqs-loctype-targtype-panels
        x: forecast_date
    - metrics/2021-01-11-score-by-loc-type-targ-type.csv:
        cache: false
        template: lqs-loctype-panel
        x: target_type
    - metrics/2021-01-11-score-by-loc-type.csv:
        cache: false
        template: lqs
        x: loc_type
        x_label: Location type
  data-prep-2020-10-12-36:
    cmd: fdt=2020-10-12 Rscript infection-kalman-data-prep.R
    deps:
    - covidhub-common.R
    - hopkins/2020-10-12
    - infection-kalman-data-prep.R
    outs:
    - data--2020-10-12--36.csv
    - initial-pars--2020-10-12--36.csv
