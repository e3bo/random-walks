stages:
  hopkins-2020-08-03:
    cmd: fdt=2020-08-03 Rscript pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-08-03
  forecast-2020-08-03:
    cmd: fdt=2020-08-03 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-08-03
    - model.ini
    outs:
    - forecasts/2020-08-03-CEID-Walk.csv
    metrics:
    - metrics/2020-08-03-forecast-calc-time.json:
        cache: false
  hopkins-2020-07-26:
    cmd: fdt=2020-07-26 Rscript pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-07-26
  forecast-2020-07-26:
    cmd: fdt=2020-07-26 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-07-26
    - model.ini
    outs:
    - forecasts/2020-07-26-CEID-Walk.csv
    metrics:
    - metrics/2020-07-26-forecast-calc-time.json:
        cache: false
  score-2020-08-03:
    cmd: ddt=2020-08-03 Rscript quantile-score.R
    deps:
    - covidhub-common.R
    - forecasts
    - hopkins/2020-08-03
    - quantile-score.R
    outs:
    - metrics/2020-08-03-residuals.rds
    plots:
    - metrics/2020-08-03-score-by-loc-type-targ-type-forecast-date.csv:
        cache: false
        template: lqs-loctype-targtype-panels
        x: forecast_date
    - metrics/2020-08-03-score-by-loc-type-targ-type.csv:
        cache: false
        template: lqs-loctype-panel
        x: target_type
    - metrics/2020-08-03-score-by-loc-type.csv:
        cache: false
        template: lqs.json
        x: loc_type
        x_label: Location type
  hopkins-2020-07-19:
    cmd: fdt=2020-07-19 Rscript pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-07-19
  forecast-2020-07-19:
    cmd: fdt=2020-07-19 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-07-19
    - model.ini
    outs:
    - forecasts/2020-07-19-CEID-Walk.csv
    metrics:
    - metrics/2020-07-19-forecast-calc-time.json:
        cache: false
  hopkins-2020-07-12:
    cmd: fdt=2020-07-12 Rscript pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-07-12
  forecast-2020-07-12:
    cmd: fdt=2020-07-12 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-07-12
    - model.ini
    outs:
    - forecasts/2020-07-12-CEID-Walk.csv
    metrics:
    - metrics/2020-07-12-forecast-calc-time.json:
        cache: false
  hopkins-2020-07-05:
    cmd: fdt=2020-07-05 Rscript pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-07-05
  forecast-2020-07-05:
    cmd: fdt=2020-07-05 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-07-05
    - model.ini
    outs:
    - forecasts/2020-07-05-CEID-Walk.csv
    metrics:
    - metrics/2020-07-05-forecast-calc-time.json:
        cache: false
  hopkins-2020-08-09:
    cmd: fdt=2020-08-09 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-08-09
  forecast-2020-08-09:
    cmd: fdt=2020-08-09 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-08-09
    - model.ini
    outs:
    - forecasts/2020-08-09-CEID-Walk.csv
    metrics:
    - metrics/2020-08-09-forecast-calc-time.json:
        cache: false
  visualize-forecast-2020-08-09-and-data-2020-08-09:
    cmd: ddt=2020-08-09 fdt=2020-08-09 ./forecast-vis.R
    deps:
    - covidhub-common.R
    - forecast-vis.R
    - forecasts/2020-08-09-CEID-Walk.csv
    - hopkins/2020-08-09
    outs:
    - visuals/fdt2020-08-09-ddt2020-08-09-cum-death-forecasts.png
    - visuals/fdt2020-08-09-ddt2020-08-09-inc-case-forecasts.pdf
    - visuals/fdt2020-08-09-ddt2020-08-09-inc-death-forecasts.png
  hopkins-2020-08-16:
    cmd: fdt=2020-08-16 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-08-16
  forecast-2020-08-16:
    cmd: fdt=2020-08-16 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-08-16
    - model.ini
    outs:
    - forecasts/2020-08-16-CEID-Walk.csv
    metrics:
    - metrics/2020-08-16-forecast-calc-time.json:
        cache: false
  score-2020-08-16:
    cmd: ddt=2020-08-16 ./quantile-score.R
    deps:
    - covidhub-common.R
    - forecasts
    - hopkins/2020-08-16
    - quantile-score.R
    outs:
    - metrics/2020-08-16-residuals.rds
    plots:
    - metrics/2020-08-16-score-by-loc-type-targ-type-forecast-date.csv:
        cache: false
        template: lqs-loctype-targtype-panels
        x: forecast_date
    - metrics/2020-08-16-score-by-loc-type-targ-type.csv:
        cache: false
        template: lqs-loctype-panel
        x: target_type
    - metrics/2020-08-16-score-by-loc-type.csv:
        cache: false
        template: lqs
        x: loc_type
        x_label: Location type
  visualize-forecast-2020-08-16-and-data-2020-08-16:
    cmd: ddt=2020-08-16 fdt=2020-08-16 ./forecast-vis.R
    deps:
    - covidhub-common.R
    - forecast-vis.R
    - forecasts/2020-08-16-CEID-Walk.csv
    - hopkins/2020-08-16
    outs:
    - visuals/fdt2020-08-16-ddt2020-08-16-cum-death-forecasts.png
    - visuals/fdt2020-08-16-ddt2020-08-16-inc-case-forecasts.pdf
    - visuals/fdt2020-08-16-ddt2020-08-16-inc-death-forecasts.png
  hopkins-2020-08-23:
    cmd: fdt=2020-08-23 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-08-23
  forecast-2020-08-23:
    cmd: fdt=2020-08-23 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-08-23
    - model.ini
    outs:
    - forecasts/2020-08-23-CEID-Walk.csv
    metrics:
    - metrics/2020-08-23-forecast-calc-time.json:
        cache: false
  score-2020-08-23:
    cmd: ddt=2020-08-23 ./quantile-score.R
    deps:
    - covidhub-common.R
    - forecasts
    - hopkins/2020-08-23
    - quantile-score.R
    outs:
    - metrics/2020-08-23-residuals.rds
    plots:
    - metrics/2020-08-23-score-by-loc-type-targ-type-forecast-date.csv:
        cache: false
        template: lqs-loctype-targtype-panels
        x: forecast_date
    - metrics/2020-08-23-score-by-loc-type-targ-type.csv:
        cache: false
        template: lqs-loctype-panel
        x: target_type
    - metrics/2020-08-23-score-by-loc-type.csv:
        cache: false
        template: lqs
        x: loc_type
        x_label: Location type
  visualize-forecast-2020-08-23-and-data-2020-08-23:
    cmd: ddt=2020-08-23 fdt=2020-08-23 ./forecast-vis.R
    deps:
    - covidhub-common.R
    - forecast-vis.R
    - forecasts/2020-08-23-CEID-Walk.csv
    - hopkins/2020-08-23
    outs:
    - visuals/fdt2020-08-23-ddt2020-08-23-cum-death-forecasts.png
    - visuals/fdt2020-08-23-ddt2020-08-23-inc-case-forecasts.pdf
    - visuals/fdt2020-08-23-ddt2020-08-23-inc-death-forecasts.png
  hopkins-2020-08-30:
    cmd: fdt=2020-08-30 ./pull-hopkins-ts-from-date.R
    deps:
    - pull-hopkins-ts-from-date.R
    outs:
    - hopkins/2020-08-30
  forecast-2020-08-30:
    cmd: fdt=2020-08-30 Rscript forecast-package-covidhub-forecast.R
    deps:
    - covidhub-common.R
    - forecast-package-covidhub-forecast.R
    - hopkins/2020-08-30
    - model.ini
    outs:
    - forecasts/2020-08-30-CEID-Walk.csv
    metrics:
    - metrics/2020-08-30-forecast-calc-time.json:
        cache: false
  score-2020-08-30:
    cmd: ddt=2020-08-30 ./quantile-score.R
    deps:
    - covidhub-common.R
    - forecasts
    - hopkins/2020-08-30
    - quantile-score.R
    outs:
    - metrics/2020-08-30-residuals.rds
    plots:
    - metrics/2020-08-30-score-by-loc-type-targ-type-forecast-date.csv:
        cache: false
        template: lqs-loctype-targtype-panels
        x: forecast_date
    - metrics/2020-08-30-score-by-loc-type-targ-type.csv:
        cache: false
        template: lqs-loctype-panel
        x: target_type
    - metrics/2020-08-30-score-by-loc-type.csv:
        cache: false
        template: lqs
        x: loc_type
        x_label: Location type
  visualize-forecast-2020-08-30-and-data-2020-08-30:
    cmd: ddt=2020-08-30 fdt=2020-08-30 ./forecast-vis.R
    deps:
    - covidhub-common.R
    - forecast-vis.R
    - forecasts/2020-08-30-CEID-Walk.csv
    - hopkins/2020-08-30
    outs:
    - visuals/fdt2020-08-30-ddt2020-08-30-cum-death-forecasts.png
    - visuals/fdt2020-08-30-ddt2020-08-30-inc-case-forecasts.pdf
    - visuals/fdt2020-08-30-ddt2020-08-30-inc-death-forecasts.png
